(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{lXdu:function(t,e,i){"use strict";i.r(e),i.d(e,"BooksModule",(function(){return q}));var r=i("3Pt+"),s=i("ofXK"),o=i("njyG"),b=i("tyNb"),n=i("fXoL");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Ib({type:t,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"p-4"],[1,"container"]],template:function(t,e){1&t&&(n.Tb(0,"div",0),n.Tb(1,"div",1),n.Pb(2,"router-outlet"),n.Sb(),n.Sb())},directives:[b.g],encapsulation:2}),t})();var c=i("XNiG"),u=i("SxV6"),l=i("5DT7");function d(t,e){1&t&&n.Pb(0,"span",11)}function g(t,e){1&t&&(n.Tb(0,"span"),n.Gc(1,"Delete"),n.Sb())}function f(t,e){if(1&t){const t=n.Ub();n.Tb(0,"tr"),n.Tb(1,"td"),n.Gc(2),n.Sb(),n.Tb(3,"td"),n.Tb(4,"a",4),n.Gc(5),n.Sb(),n.Sb(),n.Tb(6,"td"),n.Gc(7),n.Sb(),n.Tb(8,"td"),n.Gc(9),n.Sb(),n.Tb(10,"td",5),n.Gc(11),n.Sb(),n.Tb(12,"td"),n.Gc(13),n.Sb(),n.Tb(14,"td"),n.Gc(15),n.Sb(),n.Tb(16,"td"),n.Gc(17),n.Sb(),n.Tb(18,"td"),n.Gc(19),n.Sb(),n.Tb(20,"td",6),n.Tb(21,"a",7),n.Gc(22,"Edit"),n.Sb(),n.Tb(23,"button",8),n.fc("click",(function(){n.xc(t);const i=e.$implicit;return n.jc().deleteBook(i.id)})),n.Ec(24,d,1,0,"span",9),n.Ec(25,g,2,0,"span",10),n.Sb(),n.Sb(),n.Sb()}if(2&t){const t=e.$implicit;n.Bb(2),n.Hc(t.id),n.Bb(2),n.qc("routerLink","/books/",t.id,""),n.Bb(1),n.Hc(t.title),n.Bb(2),n.Hc(t.authors),n.Bb(2),n.Hc(t.publisher),n.Bb(2),n.Hc(t.description),n.Bb(2),n.Hc(t.pageCount),n.Bb(2),n.Hc(t.categories),n.Bb(2),n.Hc(t.averageRating),n.Bb(2),n.Hc(t.language),n.Bb(2),n.qc("routerLink","edit/",t.id,""),n.Bb(3),n.oc("ngIf",t.isDeleting),n.Bb(1),n.oc("ngIf",!t.isDeleting)}}let p=(()=>{class t{constructor(t,e,i){this.bookService=t,this.router=e,this.activatedRoute=i,this.dtOptions={},this.books=[],this.emailDropdown=!1,this.dtTrigger=new c.a}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:10},this.bookService.getAllFiltered().pipe(Object(u.a)()).subscribe(t=>{this.books=t,this.dtTrigger.next()})}deleteBook(t){this.bookService.delete(t).pipe(Object(u.a)()).subscribe(()=>{this.books=this.books.filter(e=>e.id!==t)})}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(l.a),n.Ob(b.c),n.Ob(b.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["ng-component"]],decls:29,vars:3,consts:[["routerLink","add",1,"btn","btn-sm","btn-success","mb-2"],[2,"overflow","auto","width","1200px","margin","0"],["datatable","",1,"table","table-striped",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[3,"routerLink"],[1,"desctiption-text-hidden"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger","btn-delete-user",3,"click"],["class","spinner-border spinner-border-sm",4,"ngIf"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm"]],template:function(t,e){1&t&&(n.Tb(0,"h1"),n.Gc(1,"Books"),n.Sb(),n.Tb(2,"a",0),n.Gc(3,"Add Book"),n.Sb(),n.Tb(4,"div",1),n.Tb(5,"table",2),n.Tb(6,"thead"),n.Tb(7,"tr"),n.Tb(8,"th"),n.Gc(9,"ID"),n.Sb(),n.Tb(10,"th"),n.Gc(11,"Title"),n.Sb(),n.Tb(12,"th"),n.Gc(13,"Authors"),n.Sb(),n.Tb(14,"th"),n.Gc(15,"Publisher"),n.Sb(),n.Tb(16,"th"),n.Gc(17,"Description"),n.Sb(),n.Tb(18,"th"),n.Gc(19,"Page count"),n.Sb(),n.Tb(20,"th"),n.Gc(21,"Categories"),n.Sb(),n.Tb(22,"th"),n.Gc(23,"Average rating"),n.Sb(),n.Tb(24,"th"),n.Gc(25,"Language"),n.Sb(),n.Pb(26,"th"),n.Sb(),n.Sb(),n.Tb(27,"tbody"),n.Ec(28,f,26,13,"tr",3),n.Sb(),n.Sb(),n.Sb()),2&t&&(n.Bb(5),n.oc("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),n.Bb(23),n.oc("ngForOf",e.books))},directives:[b.e,o.a,s.j,s.k],styles:[".desctiption-text-hidden[_ngcontent-%COMP%]{overflow:auto;display:-webkit-box;height:88px}"]}),t})();var h=i("J9tS");function m(t,e){1&t&&(n.Tb(0,"h1"),n.Gc(1,"Add Book"),n.Sb())}function S(t,e){1&t&&(n.Tb(0,"h1"),n.Gc(1,"Edit Book"),n.Sb())}function v(t,e){1&t&&(n.Tb(0,"div"),n.Gc(1,"Title is required"),n.Sb())}function T(t,e){if(1&t&&(n.Tb(0,"div",37),n.Ec(1,v,2,0,"div",0),n.Sb()),2&t){const t=n.jc(2);n.Bb(1),n.oc("ngIf",t.f.title.errors.required)}}function C(t,e){1&t&&n.Pb(0,"span",38)}const B=function(t){return{"is-invalid":t}};function k(t,e){if(1&t&&(n.Tb(0,"div"),n.Tb(1,"div",2),n.Tb(2,"div",3),n.Tb(3,"label",4),n.Gc(4,"Title"),n.Sb(),n.Pb(5,"input",5),n.Ec(6,T,2,1,"div",6),n.Sb(),n.Tb(7,"div",3),n.Tb(8,"label",7),n.Gc(9,"Authors"),n.Sb(),n.Pb(10,"input",8),n.Sb(),n.Sb(),n.Tb(11,"div",2),n.Tb(12,"div",3),n.Tb(13,"label",9),n.Gc(14,"Publisher"),n.Sb(),n.Pb(15,"input",10),n.Sb(),n.Tb(16,"div",3),n.Tb(17,"label",11),n.Gc(18,"Published Date"),n.Sb(),n.Pb(19,"input",12),n.Sb(),n.Sb(),n.Tb(20,"div",2),n.Tb(21,"div",3),n.Tb(22,"label",13),n.Gc(23,"Description"),n.Sb(),n.Pb(24,"input",14),n.Sb(),n.Tb(25,"div",3),n.Tb(26,"label",15),n.Gc(27,"Industry Identifiers"),n.Sb(),n.Pb(28,"input",16),n.Sb(),n.Sb(),n.Tb(29,"div",2),n.Tb(30,"div",3),n.Tb(31,"label",17),n.Gc(32,"Page count"),n.Sb(),n.Pb(33,"input",18),n.Sb(),n.Tb(34,"div",3),n.Tb(35,"label",19),n.Gc(36,"Categories"),n.Sb(),n.Pb(37,"input",20),n.Sb(),n.Sb(),n.Tb(38,"div",2),n.Tb(39,"div",3),n.Tb(40,"label",21),n.Gc(41,"Average rating"),n.Sb(),n.Pb(42,"input",22),n.Sb(),n.Tb(43,"div",3),n.Tb(44,"label",23),n.Gc(45,"Ratings count"),n.Sb(),n.Pb(46,"input",24),n.Sb(),n.Sb(),n.Tb(47,"div",2),n.Tb(48,"div",3),n.Tb(49,"label",25),n.Gc(50,"Maturity Rating"),n.Sb(),n.Pb(51,"input",26),n.Sb(),n.Tb(52,"div",3),n.Tb(53,"label",27),n.Gc(54,"Image Links"),n.Sb(),n.Pb(55,"input",28),n.Sb(),n.Sb(),n.Tb(56,"div",2),n.Tb(57,"div",3),n.Tb(58,"label",29),n.Gc(59,"Language"),n.Sb(),n.Pb(60,"input",30),n.Sb(),n.Tb(61,"div",3),n.Tb(62,"label",31),n.Gc(63,"Preview Link"),n.Sb(),n.Pb(64,"input",32),n.Sb(),n.Sb(),n.Tb(65,"div",33),n.Tb(66,"button",34),n.Ec(67,C,1,0,"span",35),n.Gc(68," Save "),n.Sb(),n.Tb(69,"a",36),n.Gc(70,"Cancel"),n.Sb(),n.Sb(),n.Sb()),2&t){const t=n.jc();n.Bb(5),n.oc("ngClass",n.sc(17,B,t.submitted&&t.f.title.errors)),n.Bb(1),n.oc("ngIf",t.submitted&&t.f.title.errors),n.Bb(4),n.oc("ngClass",n.sc(19,B,t.submitted&&t.f.authors.errors)),n.Bb(5),n.oc("ngClass",n.sc(21,B,t.submitted&&t.f.publisher.errors)),n.Bb(4),n.oc("ngClass",n.sc(23,B,t.submitted&&t.f.publishedDate.errors)),n.Bb(5),n.oc("ngClass",n.sc(25,B,t.submitted&&t.f.description.errors)),n.Bb(4),n.oc("ngClass",n.sc(27,B,t.submitted&&t.f.industryIdentifiers.errors)),n.Bb(5),n.oc("ngClass",n.sc(29,B,t.submitted&&t.f.pageCount.errors)),n.Bb(4),n.oc("ngClass",n.sc(31,B,t.submitted&&t.f.categories.errors)),n.Bb(5),n.oc("ngClass",n.sc(33,B,t.submitted&&t.f.averageRating.errors)),n.Bb(4),n.oc("ngClass",n.sc(35,B,t.submitted&&t.f.ratingsCount.errors)),n.Bb(5),n.oc("ngClass",n.sc(37,B,t.submitted&&t.f.maturityRating.errors)),n.Bb(4),n.oc("ngClass",n.sc(39,B,t.submitted&&t.f.imageLinks.errors)),n.Bb(5),n.oc("ngClass",n.sc(41,B,t.submitted&&t.f.language.errors)),n.Bb(4),n.oc("ngClass",n.sc(43,B,t.submitted&&t.f.previewLink.errors)),n.Bb(2),n.oc("disabled",t.loading),n.Bb(1),n.oc("ngIf",t.loading)}}function G(t,e){1&t&&(n.Tb(0,"div"),n.Gc(1,"Title is required"),n.Sb())}function y(t,e){if(1&t&&(n.Tb(0,"div",37),n.Ec(1,G,2,0,"div",0),n.Sb()),2&t){const t=n.jc(2);n.Bb(1),n.oc("ngIf",t.f.title.errors.required)}}function P(t,e){1&t&&n.Pb(0,"span",38)}function I(t,e){if(1&t&&(n.Tb(0,"div"),n.Tb(1,"div",2),n.Tb(2,"div",3),n.Tb(3,"label",4),n.Gc(4,"Title"),n.Sb(),n.Pb(5,"input",5),n.Ec(6,y,2,1,"div",6),n.Sb(),n.Tb(7,"div",3),n.Tb(8,"label",7),n.Gc(9,"Authors"),n.Sb(),n.Pb(10,"input",8),n.Sb(),n.Sb(),n.Tb(11,"div",2),n.Tb(12,"div",3),n.Tb(13,"label",9),n.Gc(14,"Publisher"),n.Sb(),n.Pb(15,"input",10),n.Sb(),n.Tb(16,"div",3),n.Tb(17,"label",11),n.Gc(18,"Published Date"),n.Sb(),n.Pb(19,"input",12),n.Sb(),n.Sb(),n.Tb(20,"div",2),n.Tb(21,"div",3),n.Tb(22,"label",13),n.Gc(23,"Description"),n.Sb(),n.Pb(24,"input",14),n.Sb(),n.Tb(25,"div",3),n.Tb(26,"label",25),n.Gc(27,"Maturity Rating"),n.Sb(),n.Pb(28,"input",26),n.Sb(),n.Sb(),n.Tb(29,"div",2),n.Tb(30,"div",3),n.Tb(31,"label",17),n.Gc(32,"Page count"),n.Sb(),n.Pb(33,"input",18),n.Sb(),n.Tb(34,"div",3),n.Tb(35,"label",19),n.Gc(36,"Categories"),n.Sb(),n.Pb(37,"input",20),n.Sb(),n.Sb(),n.Tb(38,"div",2),n.Tb(39,"div",3),n.Tb(40,"label",21),n.Gc(41,"Average rating"),n.Sb(),n.Pb(42,"input",22),n.Sb(),n.Tb(43,"div",3),n.Tb(44,"label",23),n.Gc(45,"Ratings count"),n.Sb(),n.Pb(46,"input",24),n.Sb(),n.Sb(),n.Tb(47,"div",2),n.Tb(48,"div",3),n.Tb(49,"label",29),n.Gc(50,"Language"),n.Sb(),n.Pb(51,"input",30),n.Sb(),n.Tb(52,"div",3),n.Tb(53,"label",31),n.Gc(54,"Preview Link"),n.Sb(),n.Pb(55,"input",32),n.Sb(),n.Sb(),n.Tb(56,"div",33),n.Tb(57,"button",34),n.Ec(58,P,1,0,"span",35),n.Gc(59," Save "),n.Sb(),n.Tb(60,"a",36),n.Gc(61,"Cancel"),n.Sb(),n.Sb(),n.Sb()),2&t){const t=n.jc();n.Bb(5),n.oc("ngClass",n.sc(15,B,t.submitted&&t.f.title.errors)),n.Bb(1),n.oc("ngIf",t.submitted&&t.f.title.errors),n.Bb(4),n.oc("ngClass",n.sc(17,B,t.submitted&&t.f.authors.errors)),n.Bb(5),n.oc("ngClass",n.sc(19,B,t.submitted&&t.f.publisher.errors)),n.Bb(4),n.oc("ngClass",n.sc(21,B,t.submitted&&t.f.publishedDate.errors)),n.Bb(5),n.oc("ngClass",n.sc(23,B,t.submitted&&t.f.description.errors)),n.Bb(4),n.oc("ngClass",n.sc(25,B,t.submitted&&t.f.maturityRating.errors)),n.Bb(5),n.oc("ngClass",n.sc(27,B,t.submitted&&t.f.pageCount.errors)),n.Bb(4),n.oc("ngClass",n.sc(29,B,t.submitted&&t.f.categories.errors)),n.Bb(5),n.oc("ngClass",n.sc(31,B,t.submitted&&t.f.averageRating.errors)),n.Bb(4),n.oc("ngClass",n.sc(33,B,t.submitted&&t.f.ratingsCount.errors)),n.Bb(5),n.oc("ngClass",n.sc(35,B,t.submitted&&t.f.language.errors)),n.Bb(4),n.oc("ngClass",n.sc(37,B,t.submitted&&t.f.previewLink.errors)),n.Bb(2),n.oc("disabled",t.loading),n.Bb(1),n.oc("ngIf",t.loading)}}let L=(()=>{class t{constructor(t,e,i,r,s,o){this.formBuilder=t,this.route=e,this.router=i,this.bookService=r,this.accountService=s,this.alertService=o,this.loading=!1,this.submitted=!1}ngOnInit(){this.userId=this.accountService.userId,this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({title:["",r.o.required],authors:["",r.o.required],publisher:["",r.o.required],publishedDate:["",r.o.required],description:["",r.o.required],industryIdentifiers:["",r.o.required],pageCount:["",r.o.required],categories:["",r.o.required],averageRating:["",r.o.required],ratingsCount:["",r.o.required],maturityRating:["",r.o.required],imageLinks:["",r.o.required],language:["",r.o.required],previewLink:["",r.o.required]}),this.isAddMode||this.bookService.getById(this.id).pipe(Object(u.a)()).subscribe(t=>{this.authors=t.authors,this.categories=t.categories,this.f.title.setValue(t.title),this.f.authors.setValue(t.authors),this.f.publisher.setValue(t.publisher),this.f.publishedDate.setValue(t.publishedDate),this.f.description.setValue(t.description),this.f.industryIdentifiers.setValue(t.industryIdentifiers),this.f.pageCount.setValue(t.pageCount),this.f.categories.setValue(t.categories),this.f.averageRating.setValue(t.averageRating),this.f.ratingsCount.setValue(t.ratingsCount),this.f.maturityRating.setValue(t.maturityRating),this.f.imageLinks.setValue(t.imageLinks),this.f.language.setValue(t.language),this.f.previewLink.setValue(t.previewLink),this.f.id.setValue(this.userId)})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,this.isAddMode?this.createBook():this.updateBook())}createBook(){this.form.value.authors=this.form.value.authors.split(","),this.form.value.categories=this.form.value.categories.split(","),this.form.value.industryIdentifiers=[{isbn:this.form.value.industryIdentifiers.split(",")[0]}],this.form.value.imageLinks={thumbnail:this.form.value.imageLinks.split(",")[0]},this.bookService.register(this.form.value,this.userId,!0).pipe(Object(u.a)()).subscribe(t=>{this.alertService.success("Book added successfully",{keepAfterRouteChange:!0}),this.router.navigate([".",{relativeTo:this.route}])},t=>{this.alertService.error(t.error.errorMessage),this.loading=!1})}updateBook(){this.form.value.authors!=this.authors&&(this.form.value.authors=this.form.value.authors.split(",")),this.form.value.categories!=this.categories&&(this.form.value.categories=this.form.value.categories.split(",")),this.bookService.update(this.id,this.form.value).pipe(Object(u.a)()).subscribe(t=>{this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["..",{relativeTo:this.route}])},t=>{this.alertService.error(t.error),this.loading=!1})}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(r.b),n.Ob(b.a),n.Ob(b.c),n.Ob(l.a),n.Ob(h.a),n.Ob(h.b))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-add-edit"]],decls:5,vars:5,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col"],["for","title"],["type","text","required","","formControlName","title",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","authors"],["type","text","formControlName","authors",1,"form-control",3,"ngClass"],["for","publisher"],["type","text","formControlName","publisher",1,"form-control",3,"ngClass"],["for","publishedDate"],["type","text","formControlName","publishedDate",1,"form-control",3,"ngClass"],["for","description"],["type","text","formControlName","description",1,"form-control",3,"ngClass"],["for","industryIdentifiers"],["type","text","formControlName","industryIdentifiers",1,"form-control",3,"ngClass"],["for","pageCount"],["type","text","formControlName","pageCount",1,"form-control",3,"ngClass"],["for","categories"],["type","text","formControlName","categories",1,"form-control",3,"ngClass"],["for","averageRating"],["type","text","formControlName","averageRating",1,"form-control",3,"ngClass"],["for","ratingsCount"],["type","text","formControlName","ratingsCount",1,"form-control",3,"ngClass"],["for","maturityRating"],["type","text","formControlName","maturityRating",1,"form-control",3,"ngClass"],["for","imageLinks"],["type","text","formControlName","imageLinks",1,"form-control",3,"ngClass"],["for","language"],["type","text","formControlName","language",1,"form-control",3,"ngClass"],["for","previewLink"],["type","text","formControlName","previewLink",1,"form-control",3,"ngClass"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/books",1,"btn","btn-link"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(t,e){1&t&&(n.Ec(0,m,2,0,"h1",0),n.Ec(1,S,2,0,"h1",0),n.Tb(2,"form",1),n.fc("ngSubmit",(function(){return e.onSubmit()})),n.Ec(3,k,71,45,"div",0),n.Ec(4,I,62,39,"div",0),n.Sb()),2&t&&(n.oc("ngIf",e.isAddMode),n.Bb(1),n.oc("ngIf",!e.isAddMode),n.Bb(1),n.oc("formGroup",e.form),n.Bb(1),n.oc("ngIf",e.isAddMode),n.Bb(1),n.oc("ngIf",!e.isAddMode))},directives:[s.k,r.q,r.i,r.d,r.a,r.m,r.h,r.c,s.i,b.e],encapsulation:2}),t})();const w=[{path:"",component:a,children:[{path:"",component:p},{path:"add",component:L},{path:"edit/:id",component:L}]}];let O=(()=>{class t{}return t.\u0275mod=n.Mb({type:t}),t.\u0275inj=n.Lb({factory:function(e){return new(e||t)},imports:[[b.f.forChild(w)],b.f]}),t})(),q=(()=>{class t{}return t.\u0275mod=n.Mb({type:t}),t.\u0275inj=n.Lb({factory:function(e){return new(e||t)},imports:[[s.b,r.l,O,o.b]]}),t})()}}]);