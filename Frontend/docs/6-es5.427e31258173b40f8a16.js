function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{lXdu:function(e,t,i){"use strict";i.r(t),i.d(t,"BooksModule",(function(){return E}));var r,o=i("3Pt+"),s=i("ofXK"),n=i("njyG"),b=i("tyNb"),a=i("fXoL"),c=((r=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||r)},r.\u0275cmp=a.Ib({type:r,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"p-4"],[1,"container"]],template:function(e,t){1&e&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Pb(2,"router-outlet"),a.Sb(),a.Sb())},directives:[b.g],encapsulation:2}),r),u=i("XNiG"),l=i("SxV6"),d=i("5DT7");function f(e,t){1&e&&a.Pb(0,"span",11)}function g(e,t){1&e&&(a.Tb(0,"span"),a.Gc(1,"Delete"),a.Sb())}function p(e,t){if(1&e){var i=a.Ub();a.Tb(0,"tr"),a.Tb(1,"td"),a.Gc(2),a.Sb(),a.Tb(3,"td"),a.Tb(4,"a",4),a.Gc(5),a.Sb(),a.Sb(),a.Tb(6,"td"),a.Gc(7),a.Sb(),a.Tb(8,"td"),a.Gc(9),a.Sb(),a.Tb(10,"td",5),a.Gc(11),a.Sb(),a.Tb(12,"td"),a.Gc(13),a.Sb(),a.Tb(14,"td"),a.Gc(15),a.Sb(),a.Tb(16,"td"),a.Gc(17),a.Sb(),a.Tb(18,"td"),a.Gc(19),a.Sb(),a.Tb(20,"td",6),a.Tb(21,"a",7),a.Gc(22,"Edit"),a.Sb(),a.Tb(23,"button",8),a.fc("click",(function(){a.xc(i);var e=t.$implicit;return a.jc().deleteBook(e.id)})),a.Ec(24,f,1,0,"span",9),a.Ec(25,g,2,0,"span",10),a.Sb(),a.Sb(),a.Sb()}if(2&e){var r=t.$implicit;a.Bb(2),a.Hc(r.id),a.Bb(2),a.qc("routerLink","/books/",r.id,""),a.Bb(1),a.Hc(r.title),a.Bb(2),a.Hc(r.authors),a.Bb(2),a.Hc(r.publisher),a.Bb(2),a.Hc(r.description),a.Bb(2),a.Hc(r.pageCount),a.Bb(2),a.Hc(r.categories),a.Bb(2),a.Hc(r.averageRating),a.Bb(2),a.Hc(r.language),a.Bb(2),a.qc("routerLink","edit/",r.id,""),a.Bb(3),a.oc("ngIf",r.isDeleting),a.Bb(1),a.oc("ngIf",!r.isDeleting)}}var m,h=((m=function(){function e(t,i,r){_classCallCheck(this,e),this.bookService=t,this.router=i,this.activatedRoute=r,this.dtOptions={},this.books=[],this.emailDropdown=!1,this.dtTrigger=new u.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.dtOptions={pagingType:"full_numbers",pageLength:10},this.bookService.getAllFiltered().pipe(Object(l.a)()).subscribe((function(t){e.books=t,e.dtTrigger.next()}))}},{key:"deleteBook",value:function(e){var t=this;this.bookService.delete(e).pipe(Object(l.a)()).subscribe((function(){t.books=t.books.filter((function(t){return t.id!==e}))}))}}]),e}()).\u0275fac=function(e){return new(e||m)(a.Ob(d.a),a.Ob(b.c),a.Ob(b.a))},m.\u0275cmp=a.Ib({type:m,selectors:[["ng-component"]],decls:29,vars:3,consts:[["routerLink","add",1,"btn","btn-sm","btn-success","mb-2"],[2,"overflow","auto","width","1200px","margin","0"],["datatable","",1,"table","table-striped",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[3,"routerLink"],[1,"desctiption-text-hidden"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger","btn-delete-user",3,"click"],["class","spinner-border spinner-border-sm",4,"ngIf"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm"]],template:function(e,t){1&e&&(a.Tb(0,"h1"),a.Gc(1,"Books"),a.Sb(),a.Tb(2,"a",0),a.Gc(3,"Add Book"),a.Sb(),a.Tb(4,"div",1),a.Tb(5,"table",2),a.Tb(6,"thead"),a.Tb(7,"tr"),a.Tb(8,"th"),a.Gc(9,"ID"),a.Sb(),a.Tb(10,"th"),a.Gc(11,"Title"),a.Sb(),a.Tb(12,"th"),a.Gc(13,"Authors"),a.Sb(),a.Tb(14,"th"),a.Gc(15,"Publisher"),a.Sb(),a.Tb(16,"th"),a.Gc(17,"Description"),a.Sb(),a.Tb(18,"th"),a.Gc(19,"Page count"),a.Sb(),a.Tb(20,"th"),a.Gc(21,"Categories"),a.Sb(),a.Tb(22,"th"),a.Gc(23,"Average rating"),a.Sb(),a.Tb(24,"th"),a.Gc(25,"Language"),a.Sb(),a.Pb(26,"th"),a.Sb(),a.Sb(),a.Tb(27,"tbody"),a.Ec(28,p,26,13,"tr",3),a.Sb(),a.Sb(),a.Sb()),2&e&&(a.Bb(5),a.oc("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),a.Bb(23),a.oc("ngForOf",t.books))},directives:[b.e,n.a,s.j,s.k],styles:[".desctiption-text-hidden[_ngcontent-%COMP%]{overflow:auto;display:-webkit-box;height:88px}"]}),m),v=i("J9tS");function S(e,t){1&e&&(a.Tb(0,"h1"),a.Gc(1,"Add Book"),a.Sb())}function T(e,t){1&e&&(a.Tb(0,"h1"),a.Gc(1,"Edit Book"),a.Sb())}function C(e,t){1&e&&(a.Tb(0,"div"),a.Gc(1,"Title is required"),a.Sb())}function k(e,t){if(1&e&&(a.Tb(0,"div",37),a.Ec(1,C,2,0,"div",0),a.Sb()),2&e){var i=a.jc(2);a.Bb(1),a.oc("ngIf",i.f.title.errors.required)}}function B(e,t){1&e&&a.Pb(0,"span",38)}var y=function(e){return{"is-invalid":e}};function G(e,t){if(1&e&&(a.Tb(0,"div"),a.Tb(1,"div",2),a.Tb(2,"div",3),a.Tb(3,"label",4),a.Gc(4,"Title"),a.Sb(),a.Pb(5,"input",5),a.Ec(6,k,2,1,"div",6),a.Sb(),a.Tb(7,"div",3),a.Tb(8,"label",7),a.Gc(9,"Authors"),a.Sb(),a.Pb(10,"input",8),a.Sb(),a.Sb(),a.Tb(11,"div",2),a.Tb(12,"div",3),a.Tb(13,"label",9),a.Gc(14,"Publisher"),a.Sb(),a.Pb(15,"input",10),a.Sb(),a.Tb(16,"div",3),a.Tb(17,"label",11),a.Gc(18,"Published Date"),a.Sb(),a.Pb(19,"input",12),a.Sb(),a.Sb(),a.Tb(20,"div",2),a.Tb(21,"div",3),a.Tb(22,"label",13),a.Gc(23,"Description"),a.Sb(),a.Pb(24,"input",14),a.Sb(),a.Tb(25,"div",3),a.Tb(26,"label",15),a.Gc(27,"Industry Identifiers"),a.Sb(),a.Pb(28,"input",16),a.Sb(),a.Sb(),a.Tb(29,"div",2),a.Tb(30,"div",3),a.Tb(31,"label",17),a.Gc(32,"Page count"),a.Sb(),a.Pb(33,"input",18),a.Sb(),a.Tb(34,"div",3),a.Tb(35,"label",19),a.Gc(36,"Categories"),a.Sb(),a.Pb(37,"input",20),a.Sb(),a.Sb(),a.Tb(38,"div",2),a.Tb(39,"div",3),a.Tb(40,"label",21),a.Gc(41,"Average rating"),a.Sb(),a.Pb(42,"input",22),a.Sb(),a.Tb(43,"div",3),a.Tb(44,"label",23),a.Gc(45,"Ratings count"),a.Sb(),a.Pb(46,"input",24),a.Sb(),a.Sb(),a.Tb(47,"div",2),a.Tb(48,"div",3),a.Tb(49,"label",25),a.Gc(50,"Maturity Rating"),a.Sb(),a.Pb(51,"input",26),a.Sb(),a.Tb(52,"div",3),a.Tb(53,"label",27),a.Gc(54,"Image Links"),a.Sb(),a.Pb(55,"input",28),a.Sb(),a.Sb(),a.Tb(56,"div",2),a.Tb(57,"div",3),a.Tb(58,"label",29),a.Gc(59,"Language"),a.Sb(),a.Pb(60,"input",30),a.Sb(),a.Tb(61,"div",3),a.Tb(62,"label",31),a.Gc(63,"Preview Link"),a.Sb(),a.Pb(64,"input",32),a.Sb(),a.Sb(),a.Tb(65,"div",33),a.Tb(66,"button",34),a.Ec(67,B,1,0,"span",35),a.Gc(68," Save "),a.Sb(),a.Tb(69,"a",36),a.Gc(70,"Cancel"),a.Sb(),a.Sb(),a.Sb()),2&e){var i=a.jc();a.Bb(5),a.oc("ngClass",a.sc(17,y,i.submitted&&i.f.title.errors)),a.Bb(1),a.oc("ngIf",i.submitted&&i.f.title.errors),a.Bb(4),a.oc("ngClass",a.sc(19,y,i.submitted&&i.f.authors.errors)),a.Bb(5),a.oc("ngClass",a.sc(21,y,i.submitted&&i.f.publisher.errors)),a.Bb(4),a.oc("ngClass",a.sc(23,y,i.submitted&&i.f.publishedDate.errors)),a.Bb(5),a.oc("ngClass",a.sc(25,y,i.submitted&&i.f.description.errors)),a.Bb(4),a.oc("ngClass",a.sc(27,y,i.submitted&&i.f.industryIdentifiers.errors)),a.Bb(5),a.oc("ngClass",a.sc(29,y,i.submitted&&i.f.pageCount.errors)),a.Bb(4),a.oc("ngClass",a.sc(31,y,i.submitted&&i.f.categories.errors)),a.Bb(5),a.oc("ngClass",a.sc(33,y,i.submitted&&i.f.averageRating.errors)),a.Bb(4),a.oc("ngClass",a.sc(35,y,i.submitted&&i.f.ratingsCount.errors)),a.Bb(5),a.oc("ngClass",a.sc(37,y,i.submitted&&i.f.maturityRating.errors)),a.Bb(4),a.oc("ngClass",a.sc(39,y,i.submitted&&i.f.imageLinks.errors)),a.Bb(5),a.oc("ngClass",a.sc(41,y,i.submitted&&i.f.language.errors)),a.Bb(4),a.oc("ngClass",a.sc(43,y,i.submitted&&i.f.previewLink.errors)),a.Bb(2),a.oc("disabled",i.loading),a.Bb(1),a.oc("ngIf",i.loading)}}function P(e,t){1&e&&(a.Tb(0,"div"),a.Gc(1,"Title is required"),a.Sb())}function I(e,t){if(1&e&&(a.Tb(0,"div",37),a.Ec(1,P,2,0,"div",0),a.Sb()),2&e){var i=a.jc(2);a.Bb(1),a.oc("ngIf",i.f.title.errors.required)}}function w(e,t){1&e&&a.Pb(0,"span",38)}function L(e,t){if(1&e&&(a.Tb(0,"div"),a.Tb(1,"div",2),a.Tb(2,"div",3),a.Tb(3,"label",4),a.Gc(4,"Title"),a.Sb(),a.Pb(5,"input",5),a.Ec(6,I,2,1,"div",6),a.Sb(),a.Tb(7,"div",3),a.Tb(8,"label",7),a.Gc(9,"Authors"),a.Sb(),a.Pb(10,"input",8),a.Sb(),a.Sb(),a.Tb(11,"div",2),a.Tb(12,"div",3),a.Tb(13,"label",9),a.Gc(14,"Publisher"),a.Sb(),a.Pb(15,"input",10),a.Sb(),a.Tb(16,"div",3),a.Tb(17,"label",11),a.Gc(18,"Published Date"),a.Sb(),a.Pb(19,"input",12),a.Sb(),a.Sb(),a.Tb(20,"div",2),a.Tb(21,"div",3),a.Tb(22,"label",13),a.Gc(23,"Description"),a.Sb(),a.Pb(24,"input",14),a.Sb(),a.Tb(25,"div",3),a.Tb(26,"label",25),a.Gc(27,"Maturity Rating"),a.Sb(),a.Pb(28,"input",26),a.Sb(),a.Sb(),a.Tb(29,"div",2),a.Tb(30,"div",3),a.Tb(31,"label",17),a.Gc(32,"Page count"),a.Sb(),a.Pb(33,"input",18),a.Sb(),a.Tb(34,"div",3),a.Tb(35,"label",19),a.Gc(36,"Categories"),a.Sb(),a.Pb(37,"input",20),a.Sb(),a.Sb(),a.Tb(38,"div",2),a.Tb(39,"div",3),a.Tb(40,"label",21),a.Gc(41,"Average rating"),a.Sb(),a.Pb(42,"input",22),a.Sb(),a.Tb(43,"div",3),a.Tb(44,"label",23),a.Gc(45,"Ratings count"),a.Sb(),a.Pb(46,"input",24),a.Sb(),a.Sb(),a.Tb(47,"div",2),a.Tb(48,"div",3),a.Tb(49,"label",29),a.Gc(50,"Language"),a.Sb(),a.Pb(51,"input",30),a.Sb(),a.Tb(52,"div",3),a.Tb(53,"label",31),a.Gc(54,"Preview Link"),a.Sb(),a.Pb(55,"input",32),a.Sb(),a.Sb(),a.Tb(56,"div",33),a.Tb(57,"button",34),a.Ec(58,w,1,0,"span",35),a.Gc(59," Save "),a.Sb(),a.Tb(60,"a",36),a.Gc(61,"Cancel"),a.Sb(),a.Sb(),a.Sb()),2&e){var i=a.jc();a.Bb(5),a.oc("ngClass",a.sc(15,y,i.submitted&&i.f.title.errors)),a.Bb(1),a.oc("ngIf",i.submitted&&i.f.title.errors),a.Bb(4),a.oc("ngClass",a.sc(17,y,i.submitted&&i.f.authors.errors)),a.Bb(5),a.oc("ngClass",a.sc(19,y,i.submitted&&i.f.publisher.errors)),a.Bb(4),a.oc("ngClass",a.sc(21,y,i.submitted&&i.f.publishedDate.errors)),a.Bb(5),a.oc("ngClass",a.sc(23,y,i.submitted&&i.f.description.errors)),a.Bb(4),a.oc("ngClass",a.sc(25,y,i.submitted&&i.f.maturityRating.errors)),a.Bb(5),a.oc("ngClass",a.sc(27,y,i.submitted&&i.f.pageCount.errors)),a.Bb(4),a.oc("ngClass",a.sc(29,y,i.submitted&&i.f.categories.errors)),a.Bb(5),a.oc("ngClass",a.sc(31,y,i.submitted&&i.f.averageRating.errors)),a.Bb(4),a.oc("ngClass",a.sc(33,y,i.submitted&&i.f.ratingsCount.errors)),a.Bb(5),a.oc("ngClass",a.sc(35,y,i.submitted&&i.f.language.errors)),a.Bb(4),a.oc("ngClass",a.sc(37,y,i.submitted&&i.f.previewLink.errors)),a.Bb(2),a.oc("disabled",i.loading),a.Bb(1),a.oc("ngIf",i.loading)}}var O,q,x,R=((O=function(){function e(t,i,r,o,s,n){_classCallCheck(this,e),this.formBuilder=t,this.route=i,this.router=r,this.bookService=o,this.accountService=s,this.alertService=n,this.loading=!1,this.submitted=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.userId=this.accountService.userId,this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({title:["",o.o.required],authors:["",o.o.required],publisher:["",o.o.required],publishedDate:["",o.o.required],description:["",o.o.required],industryIdentifiers:["",o.o.required],pageCount:["",o.o.required],categories:["",o.o.required],averageRating:["",o.o.required],ratingsCount:["",o.o.required],maturityRating:["",o.o.required],imageLinks:["",o.o.required],language:["",o.o.required],previewLink:["",o.o.required]}),this.isAddMode||this.bookService.getById(this.id).pipe(Object(l.a)()).subscribe((function(t){e.authors=t.authors,e.categories=t.categories,e.f.title.setValue(t.title),e.f.authors.setValue(t.authors),e.f.publisher.setValue(t.publisher),e.f.publishedDate.setValue(t.publishedDate),e.f.description.setValue(t.description),e.f.industryIdentifiers.setValue(t.industryIdentifiers),e.f.pageCount.setValue(t.pageCount),e.f.categories.setValue(t.categories),e.f.averageRating.setValue(t.averageRating),e.f.ratingsCount.setValue(t.ratingsCount),e.f.maturityRating.setValue(t.maturityRating),e.f.imageLinks.setValue(t.imageLinks),e.f.language.setValue(t.language),e.f.previewLink.setValue(t.previewLink),e.f.id.setValue(e.userId)}))}},{key:"onSubmit",value:function(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,this.isAddMode?this.createBook():this.updateBook())}},{key:"createBook",value:function(){var e=this;this.form.value.authors=this.form.value.authors.split(","),this.form.value.categories=this.form.value.categories.split(","),this.form.value.industryIdentifiers=[{isbn:this.form.value.industryIdentifiers.split(",")[0]}],this.form.value.imageLinks={thumbnail:this.form.value.imageLinks.split(",")[0]},this.bookService.register(this.form.value,this.userId,!0).pipe(Object(l.a)()).subscribe((function(t){e.alertService.success("Book added successfully",{keepAfterRouteChange:!0}),e.router.navigate([".",{relativeTo:e.route}])}),(function(t){e.alertService.error(t.error.errorMessage),e.loading=!1}))}},{key:"updateBook",value:function(){var e=this;this.form.value.authors!=this.authors&&(this.form.value.authors=this.form.value.authors.split(",")),this.form.value.categories!=this.categories&&(this.form.value.categories=this.form.value.categories.split(",")),this.bookService.update(this.id,this.form.value).pipe(Object(l.a)()).subscribe((function(t){e.alertService.success("Update successful",{keepAfterRouteChange:!0}),e.router.navigate(["..",{relativeTo:e.route}])}),(function(t){e.alertService.error(t.error),e.loading=!1}))}},{key:"f",get:function(){return this.form.controls}}]),e}()).\u0275fac=function(e){return new(e||O)(a.Ob(o.b),a.Ob(b.a),a.Ob(b.c),a.Ob(d.a),a.Ob(v.a),a.Ob(v.b))},O.\u0275cmp=a.Ib({type:O,selectors:[["app-add-edit"]],decls:5,vars:5,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col"],["for","title"],["type","text","required","","formControlName","title",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","authors"],["type","text","formControlName","authors",1,"form-control",3,"ngClass"],["for","publisher"],["type","text","formControlName","publisher",1,"form-control",3,"ngClass"],["for","publishedDate"],["type","text","formControlName","publishedDate",1,"form-control",3,"ngClass"],["for","description"],["type","text","formControlName","description",1,"form-control",3,"ngClass"],["for","industryIdentifiers"],["type","text","formControlName","industryIdentifiers",1,"form-control",3,"ngClass"],["for","pageCount"],["type","text","formControlName","pageCount",1,"form-control",3,"ngClass"],["for","categories"],["type","text","formControlName","categories",1,"form-control",3,"ngClass"],["for","averageRating"],["type","text","formControlName","averageRating",1,"form-control",3,"ngClass"],["for","ratingsCount"],["type","text","formControlName","ratingsCount",1,"form-control",3,"ngClass"],["for","maturityRating"],["type","text","formControlName","maturityRating",1,"form-control",3,"ngClass"],["for","imageLinks"],["type","text","formControlName","imageLinks",1,"form-control",3,"ngClass"],["for","language"],["type","text","formControlName","language",1,"form-control",3,"ngClass"],["for","previewLink"],["type","text","formControlName","previewLink",1,"form-control",3,"ngClass"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/books",1,"btn","btn-link"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,t){1&e&&(a.Ec(0,S,2,0,"h1",0),a.Ec(1,T,2,0,"h1",0),a.Tb(2,"form",1),a.fc("ngSubmit",(function(){return t.onSubmit()})),a.Ec(3,G,71,45,"div",0),a.Ec(4,L,62,39,"div",0),a.Sb()),2&e&&(a.oc("ngIf",t.isAddMode),a.Bb(1),a.oc("ngIf",!t.isAddMode),a.Bb(1),a.oc("formGroup",t.form),a.Bb(1),a.oc("ngIf",t.isAddMode),a.Bb(1),a.oc("ngIf",!t.isAddMode))},directives:[s.k,o.q,o.i,o.d,o.a,o.m,o.h,o.c,s.i,b.e],encapsulation:2}),O),A=[{path:"",component:c,children:[{path:"",component:h},{path:"add",component:R},{path:"edit/:id",component:R}]}],D=((x=function e(){_classCallCheck(this,e)}).\u0275mod=a.Mb({type:x}),x.\u0275inj=a.Lb({factory:function(e){return new(e||x)},imports:[[b.f.forChild(A)],b.f]}),x),E=((q=function e(){_classCallCheck(this,e)}).\u0275mod=a.Mb({type:q}),q.\u0275inj=a.Lb({factory:function(e){return new(e||q)},imports:[[s.b,o.l,D,n.b]]}),q)}}]);